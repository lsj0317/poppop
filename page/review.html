<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고객 후기 - 폭죽 & 행사</title> 
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="style.css">
    <style>
      /* -------------------- */
/* 고객 후기 페이지 스타일 */
/* -------------------- */

.search-box {
    display: flex;
    gap: 10px;
    align-items: center;
}

#search-option, #search-input, #search-btn {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 0.9em;
}

#search-input {
    flex-grow: 1; /* 검색창이 남는 공간을 모두 차지하도록 */
}

#search-btn {
    background-color: #555;
    color: white;
    cursor: pointer;
    border-color: #555;
}
#search-btn:hover {
    background-color: #333;
}

.reviews-table th:nth-child(2),
.reviews-table td:nth-child(2) {
    text-align: center; /* 작성자 중앙 정렬 */
}


.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
    gap: 8px;
}

.pagination button {
    background-color: #fff;
    color: #333;
    border: 1px solid #ddd;
    padding: 8px 14px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
}

.pagination button:hover {
    background-color: #f1f1f1;
}

.pagination button.active {
    background-color: #FF5733;
    color: white;
    border-color: #FF5733;
    font-weight: 700;
}

.pagination button:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}
    </style>
</head>
<body>
    <div class="site-wrap">
        <header>
            <nav class="navbar">
                <div class="navbar-logo">
                    <a href="../index.html">🎇 FireWorks</a> </div>
                <ul class="navbar-menu">
                    <li class="dropdown">
                        <a href="#">상품</a>
                        <ul class="dropdown-content">
                            <li><a href="#">축제</a></li>
                            <li><a href="#">폭죽</a></li>
                            <li><a href="#">파티용품</a></li>
                        </ul>
                    </li>
                    <li><a href="#">포트폴리오</a></li>
                    <li><a href="#">문의하기</a></li>
                    <li><a href="#">로그인</a></li>
                </ul>
            </nav>
        </header>

        <main class="main-container">
            <aside class="sidebar-left">
                <div class="contact-info">
                    <h2>문의 안내</h2>
                    <div class="info-item"><h3>📞 문의 전화</h3><p>02-1234-5678</p></div>
                    <div class="info-item"><h3>📧 이메일</h3><p>contact@fireworks.com</p></div>
                    <div class="info-item"><h3>📱 SNS 문의</h3><p>카카오톡: @fireworks</p></div>
                </div>
            </aside>

            <section class="content-right">
                <div class="reviews-section">
                    <div class="reviews-header">
                        <h2>고객 후기</h2>
                        <div class="search-box">
                            <select id="search-option">
                                <option value="all">전체</option>
                                <option value="title">제목</option>
                                <option value="author">작성자</option>
                            </select>
                            <input type="text" id="search-input" placeholder="검색어를 입력하세요.">
                            <button id="search-btn">검색</button>
                        </div>
                    </div>
                    <table class="reviews-table">
                        <thead>
                            <tr>
                                <th>제목</th>
                                <th>작성자</th> <th>작성일</th>
                                <th>추천수</th>
                            </tr>
                        </thead>
                        <tbody id="reviews-tbody">
                            </tbody>
                    </table>
                    <div class="pagination">
                        </div>
                </div>
            </section>
            </main>

            <footer class="site-footer">
                <div class="footer-content">
                    <div class="footer-logo">
                        MUJUKI-FireWorks
                    </div>
                    <div class="footer-info">
                        <p><strong>사업자명:</strong> MUJUKI</p>
                        <p><strong>사업자번호:</strong> 123-45-67890</p>
                        <p><strong>주소:</strong> 경기도 오산시 원동로</p>
                        <p><strong>이메일:</strong> contact@fireworks.com</p>
                    </div>
                </div>
            </footer>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
    // 30개의 더미 데이터 생성
    const dummyData = Array.from({ length: 30 }, (_, i) => {
        const id = i + 1;
        const authors = ['김*준', '이*연', '박*윤', '최*우', '정*은'];
        return {
            id: id,
            title: `폭죽 이벤트 후기... (${id})`,
            author: authors[i % authors.length],
            date: `2025-10-${String(15 - (i % 15)).padStart(2, '0')}`,
            recommendations: Math.floor(Math.random() * 100)
        };
    });

    let currentPage = 1;
    const itemsPerPage = 10;
    let filteredData = [...dummyData];

    const tbody = document.getElementById('reviews-tbody');
    const paginationContainer = document.querySelector('.pagination');
    const searchBtn = document.getElementById('search-btn');
    const searchInput = document.getElementById('search-input');
    const searchOption = document.getElementById('search-option');

    // 테이블 렌더링 함수
    function renderTable() {
        tbody.innerHTML = '';
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const pageItems = filteredData.slice(startIndex, endIndex);

        if (pageItems.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4">검색 결과가 없습니다.</td></tr>';
            return;
        }

        pageItems.forEach(item => {
            const row = `
                <tr>
                    <td>${item.title}</td>
                    <td>${item.author}</td>
                    <td>${item.date}</td>
                    <td>${item.recommendations}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    // 페이징 렌더링 함수
    function renderPagination() {
        paginationContainer.innerHTML = '';
        const totalPages = Math.ceil(filteredData.length / itemsPerPage);
       
        // 이전 버튼
        const prevBtn = document.createElement('button');
        prevBtn.textContent = '«';
        prevBtn.disabled = currentPage === 1;
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderTable();
                renderPagination();
            }
        });
        paginationContainer.appendChild(prevBtn);

        // 페이지 번호 버튼
        for (let i = 1; i <= totalPages; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.textContent = i;
            if (i === currentPage) {
                pageBtn.classList.add('active');
            }
            pageBtn.addEventListener('click', () => {
                currentPage = i;
                renderTable();
                renderPagination();
            });
            paginationContainer.appendChild(pageBtn);
        }

        // 다음 버튼
        const nextBtn = document.createElement('button');
        nextBtn.textContent = '»';
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderTable();
                renderPagination();
            }
        });
        paginationContainer.appendChild(nextBtn);
    }
   
    // 검색 기능 함수
    function handleSearch() {
        const searchTerm = searchInput.value.trim();
        const option = searchOption.value;

        if (!searchTerm) {
            alert('내용을 입력해주세요.');
            return;
        }

        filteredData = dummyData.filter(item => {
            if (option === 'all') {
                return item.title.includes(searchTerm) || item.author.includes(searchTerm);
            } else if (option === 'title') {
                return item.title.includes(searchTerm);
            } else if (option === 'author') {
                return item.author.includes(searchTerm);
            }
            return false;
        });
       
        currentPage = 1; // 검색 후 첫 페이지로 리셋
        renderTable();
        renderPagination();
    }

    // 검색 버튼 클릭 이벤트
    searchBtn.addEventListener('click', handleSearch);
   
    // 엔터 키로 검색
    searchInput.addEventListener('keyup', (event) => {
        if (event.key === 'Enter') {
            handleSearch();
        }
    });

    // 초기 렌더링
    renderTable();
    renderPagination();
});
    </script>
</body>
</html>
